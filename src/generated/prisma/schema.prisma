generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Instituciones {
  id                  Int               @id @default(autoincrement())
  nombre              String            @db.VarChar(255)
  direccion_principal String            @db.VarChar(500)
  nit                 String            @db.VarChar(50)
  nombre_contacto     String            @db.VarChar(255)
  telefono_contacto   String            @db.VarChar(20)
  email               String            @unique @db.VarChar(255)
  password            String            @db.VarChar(255)
  tiene_sedes         Boolean           @default(false)
  jornadas            String[]          @default([])
  created_at          DateTime          @default(now()) @map("created_at")
  updated_at          DateTime          @updatedAt @map("updated_at")
  administradores     Administradores[]
  sedes               Sedes[]

  @@map("Instituciones")
}

model Sedes {
  id             Int           @id @default(autoincrement())
  nombre         String        @db.VarChar(255)
  jornadas       String[]      @default([])
  institucion_id Int
  created_at     DateTime      @default(now()) @map("created_at")
  updated_at     DateTime      @updatedAt @map("updated_at")
  institucion    Instituciones @relation(fields: [institucion_id], references: [id], onDelete: Cascade)

  @@map("Sedes")
}

model Administradores {
  id               Int           @id @default(autoincrement())
  nombre           String        @db.VarChar(255)
  apellido         String        @db.VarChar(255)
  email            String        @unique @db.VarChar(255)
  telefono         String?       @db.VarChar(20)
  cargo            String        @db.VarChar(100)
  institucion_id   Int
  fecha_nacimiento DateTime?     @db.Date
  direccion        String?
  activo           Boolean       @default(true)
  created_at       DateTime      @default(now()) @map("created_at")
  updated_at       DateTime      @updatedAt @map("updated_at")
  institucion      Instituciones @relation(fields: [institucion_id], references: [id], onDelete: Cascade)

  @@map("Administradores")
}
